(()=>{var e={166:e=>{const t=["incaseoffire","findanyintsol","kirbycar","debuggingcss"],a=e=>{const a=Math.floor(Math.random()*t.length);let s=Math.floor(Math.random()*t.length);return s===a&&(s=s+1>=t.length?0:s+1),React.createElement("div",{className:"ad"},React.createElement("img",{src:`/assets/img/ads/${t[a]}.png`,className:"adImgRight"}),React.createElement("img",{src:`/assets/img/ads/${t[s]}.png`,className:"adImgLeft"}))};e.exports={renderAd:()=>{ReactDOM.render(React.createElement(a,null),document.getElementById("adContainer"))}}},762:(e,t,a)=>{"use strict";a.d(t,{t:()=>x});let s=1e3,o=1e3,r={type:Phaser.AUTO,parent:"game",width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:function(){this.load.setBaseURL(""),this.load.image("background",`/assets/img/background_${k}.png`),this.load.image("treasure","/assets/img/treasure-mound.png"),this.load.image("J1m_white","/assets/img/robot/robot_white.png"),this.load.image("J1m_red","/assets/img/robot/robot_red.png"),this.load.image("J1m_blue","/assets/img/robot/robot_blue.png"),this.load.image("J1m_yellow","/assets/img/robot/robot_yellow.png"),this.load.image("J1m_green","/assets/img/robot/robot_green.png"),this.load.image("J1m_pink","/assets/img/robot/robot_pink.png"),this.load.image("J1m_purple","/assets/img/robot/robot_purple.png"),this.load.image("J1m_orange","/assets/img/robot/robot_orange.png"),this.load.image("K3vin_white","/assets/img/robot2/robot2_white.png"),this.load.image("K3vin_red","/assets/img/robot2/robot2_red.png"),this.load.image("K3vin_blue","/assets/img/robot2/robot2_blue.png"),this.load.image("K3vin_yellow","/assets/img/robot2/robot2_yellow.png"),this.load.image("K3vin_green","/assets/img/robot2/robot2_green.png"),this.load.image("K3vin_pink","/assets/img/robot2/robot2_pink.png"),this.load.image("K3vin_purple","/assets/img/robot2/robot2_purple.png"),this.load.image("K3vin_orange","/assets/img/robot2/robot2_orange.png"),this.load.image("C4rla_white","/assets/img/robot3/robot3_white.png"),this.load.image("C4rla_red","/assets/img/robot3/robot3_red.png"),this.load.image("C4rla_blue","/assets/img/robot3/robot3_blue.png"),this.load.image("C4rla_yellow","/assets/img/robot3/robot3_yellow.png"),this.load.image("C4rla_green","/assets/img/robot3/robot3_green.png"),this.load.image("C4rla_pink","/assets/img/robot3/robot3_pink.png"),this.load.image("C4rla_purple","/assets/img/robot3/robot3_purple.png"),this.load.image("C4rla_orange","/assets/img/robot3/robot3_orange.png"),this.load.image("B3th_white","/assets/img/robot4/robot4_white.png"),this.load.image("B3th_red","/assets/img/robot4/robot4_red.png"),this.load.image("B3th_blue","/assets/img/robot4/robot4_blue.png"),this.load.image("B3th_yellow","/assets/img/robot4/robot4_yellow.png"),this.load.image("B3th_green","/assets/img/robot4/robot4_green.png"),this.load.image("B3th_pink","/assets/img/robot4/robot4_pink.png"),this.load.image("B3th_purple","/assets/img/robot4/robot4_purple.png"),this.load.image("B3th_orange","/assets/img/robot4/robot4_orange.png"),this.load.image("S0nny_white","/assets/img/robot5/robot5_white.png"),this.load.image("S0nny_red","/assets/img/robot5/robot5_red.png"),this.load.image("S0nny_blue","/assets/img/robot5/robot5_blue.png"),this.load.image("S0nny_yellow","/assets/img/robot5/robot5_yellow.png"),this.load.image("S0nny_green","/assets/img/robot5/robot5_green.png"),this.load.image("S0nny_pink","/assets/img/robot5/robot5_pink.png"),this.load.image("S0nny_purple","/assets/img/robot5/robot5_purple.png"),this.load.image("S0nny_orange","/assets/img/robot5/robot5_orange.png"),this.load.image("5u5bot_white","/assets/img/susbot/susbot_white.png"),this.load.image("5u5bot_red","/assets/img/susbot/susbot_red.png"),this.load.image("5u5bot_blue","/assets/img/susbot/susbot_blue.png"),this.load.image("5u5bot_yellow","/assets/img/susbot/susbot_yellow.png"),this.load.image("5u5bot_green","/assets/img/susbot/susbot_green.png"),this.load.image("5u5bot_pink","/assets/img/susbot/susbot_pink.png"),this.load.image("5u5bot_purple","/assets/img/susbot/susbot_purple.png"),this.load.image("5u5bot_orange","/assets/img/susbot/susbot_orange.png"),this.load.image("Pr1ck_white","/assets/img/cactus/cactus_white.png"),this.load.image("Pr1ck_red","/assets/img/cactus/cactus_red.png"),this.load.image("Pr1ck_blue","/assets/img/cactus/cactus_blue.png"),this.load.image("Pr1ck_yellow","/assets/img/cactus/cactus_yellow.png"),this.load.image("Pr1ck_green","/assets/img/cactus/cactus_green.png"),this.load.image("Pr1ck_pink","/assets/img/cactus/cactus_pink.png"),this.load.image("Pr1ck_purple","/assets/img/cactus/cactus_purple.png"),this.load.image("Pr1ck_orange","/assets/img/cactus/cactus_orange.png"),this.load.image("P3nny_white","/assets/img/penguin/penguin_white.png"),this.load.image("P3nny_red","/assets/img/penguin/penguin_red.png"),this.load.image("P3nny_blue","/assets/img/penguin/penguin_blue.png"),this.load.image("P3nny_yellow","/assets/img/penguin/penguin_yellow.png"),this.load.image("P3nny_green","/assets/img/penguin/penguin_green.png"),this.load.image("P3nny_pink","/assets/img/penguin/penguin_pink.png"),this.load.image("P3nny_purple","/assets/img/penguin/penguin_purple.png"),this.load.image("P3nny_orange","/assets/img/penguin/penguin_orange.png")},create:function(){const e=this;this.socket=io(`/?room=${f}&skin=${K}&name=${R}`,{autoConnect:!1}),this.socket.open(),E.addEventListener("click",(()=>{I(e)})),E.classList.remove("hidden"),this.otherPlayers=this.physics.add.group(),this.socket.on("currentPlayers",(t=>{Object.keys(t).forEach((a=>{t[a].playerId===e.socket.id?function(e,t){e.player=e.physics.add.sprite(t.x,t.y,t.skin),e.player.setBounce(0),e.player.setCollideWorldBounds(!0),e.cameras.main.startFollow(e.player)}(e,t[a]):N(e,t[a])}))})),this.socket.on("newPlayer",(t=>{N(e,t)})),this.socket.on("playerDisconnected",(t=>{e.otherPlayers.getChildren().forEach((e=>{t===e.playerId&&e.destroy()}))})),l=this.input.keyboard.createCursorKeys(),this.socket.on("playerMoved",(t=>{e.otherPlayers.getChildren().forEach((e=>{t.playerId===e.playerId&&(e.setPosition(t.x,t.y),e.flipX=t.flip)}))})),this.gameTimer=0,this.socket.on("timerTicked",(t=>{e.gameTimer=t,p.setText(w(e.gameTimer))})),this.treasures=this.physics.add.group(),this.socket.on("placeTreasures",(t=>{t.forEach((t=>{!function(e,t){const a=e.physics.add.sprite(t.x,t.y,"treasure");a._id=t._id,a.challenge=t.challenge,e.treasures.add(a)}(e,t)}))})),this.socket.on("treasureRemoved",(t=>{const a=e.treasures.getChildren().find((e=>e._id===t._id));u&&y===a&&(u=!1,b.setText("")),a.destroy()})),this.playerWinText=this.add.text(0,0,"",{fontSize:"32px",fill:"#000",align:"center",fontFamily:"Dosis, Arial, sans-serif"}),this.playerWinText.setDepth(1),this.gameOver=!1,this.socket.on("playerWon",(t=>{let a="";t.forEach((e=>{a+=`${e.name}: ${e.score}\n`})),e.playerWinText.setText(a),e.playerWinText.x=this.player.body.position.x-e.playerWinText.width/2,e.playerWinText.y=this.player.body.position.y-200,e.gameOver=!0})),this.gameStarted=!1,this.socket.on("startGame",(e=>{this.gameStarted=e})),this.add.image(s/2,o/2,"background"),this.cameras.main.setBackgroundColor("#863b00"),this.physics.world.setBounds(0,0,s,o),d=0,c=this.add.text(s/(20/3),o/4.0816,d,{fontSize:"32px",fill:"#000",fontFamily:"Dosis, Arial, sans-serif"}),c.setDepth(1),p=this.add.text(s/2,o/4.0816,w(this.gameTimer),{fontSize:"32px",fill:"#000",fontFamily:"Dosis, Arial, sans-serif"}),p.setDepth(1),b=this.add.text(s/1.8796,o/(5/3),"",{fontSize:"40px",fill:"#000",align:"center",fontFamily:"Dosis, Arial, sans-serif"}),b.setDepth(1),m=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),u=!1,h=[],h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Q)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.E)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.R)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.T)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Y)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.U)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.I)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.O)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.F)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.G)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.H)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.J)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.K)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.L)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.X)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.C)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.V)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.B)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.N)),h.push(this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.M))},update:function(){if(this.player&&!this.gameOver&&this.gameStarted){if(l.left.isDown&&!u?(this.player.setVelocityX(-300),this.player.flipX=!0):l.right.isDown&&!u?(this.player.setVelocityX(i),this.player.flipX=!1):this.player.setVelocityX(0),l.up.isDown&&!u?this.player.setVelocityY(-300):l.down.isDown&&!u?this.player.setVelocityY(i):this.player.setVelocityY(0),Phaser.Input.Keyboard.JustDown(m)&&(u?(u=!1,b.setText("")):this.treasures.children.iterate((e=>{this.physics.world.overlap(this.player,e,v)}))),u)if(Phaser.Input.Keyboard.JustDown(h[y.challenge[g]]))g++,b.setText(b.text+" "+n[y.challenge[g]]),g>=y.challenge.length&&(this,e=y,d++,c.setText(d),u=!1,b.setText(""),this.socket.emit("treasureCollected",{x:e.x,y:e.y,challenge:e.challenge,_id:e._id}),e.destroy());else if(P){let e=!1;for(let t=0;t<h.length;t++)e=e||Phaser.Input.Keyboard.JustDown(h[t]);e&&(u=!1,b.setText(""))}var e;c.x=this.player.body.position.x-350,c.y=this.player.body.position.y-255,p.x=this.player.body.position.x,p.y=this.player.body.position.y-255,b.x=this.player.body.position.x+this.player.body.width/2-b.displayWidth/2,b.y=this.player.body.position.y+100,!this.player.oldPosition||this.player.body.position.x===this.player.oldPosition.x&&this.player.body.position.y===this.player.oldPosition.y||this.socket.emit("playerMovement",{x:this.player.body.position.x,y:this.player.body.position.y}),this.player.oldPosition={x:this.player.body.position.x,y:this.player.body.position.y}}}}};const i=300,n=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"];let l,m,d,c,p,h,u,y,g,b,_,f,E,K,R,k,P=!1;const x=(e,t,a,i,n,l)=>{f=e,P=t,s=i.width,o=i.height,k=a,K=n,R=l,_=new Phaser.Game(r),E=document.querySelector("#leaveRoomButton")};function v(e,t){y=t,u=!0,g=0,b.setText(n[y.challenge[g]])}function w(e){let t=Math.floor(e/60),a=Math.floor(e%60);return`${t}:${a<10?"0"+a:a}`}function N(e,t){const a=e.physics.add.sprite(t.x,t.y,t.skin).setOrigin(.25);a.playerId=t.playerId,a.setPosition(t.x,t.y),e.otherPlayers.add(a)}const I=e=>{e.socket.disconnect(),E.classList.add("hidden"),_.destroy(!0,!1),document.querySelector("#gameSetup").classList.remove("hidden"),document.querySelector("#roomList").classList.remove("hidden")}},603:e=>{e.exports={sendPost:async(e,t,a,s)=>{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await o.json();r.redirect&&(window.location=r.redirect),r.error&&(a.innerText=r.error),s&&s(r)}}},856:e=>{const t=e=>React.createElement("nav",{className:"navbar"},React.createElement("a",{href:"/home",className:"navHome"},"home"),React.createElement("a",{href:"/game",className:"navGame"},"game"),React.createElement("a",{href:"/leaderboard",className:"navBoard"},"leaderboard"),React.createElement("a",{href:"/shop",className:"navShop"},"shop"),React.createElement("a",{href:"/account",className:"navAccount"},"account"),React.createElement("a",{href:"/logout",className:"navLogout"},"logout"));e.exports={renderNavbar:()=>{ReactDOM.render(React.createElement(t,null),document.getElementById("navbar"))}}},977:(e,t,a)=>{"use strict";var s=a(762),o=a(603);const r=a(856),i=a(166),n=e=>{e.preventDefault();const t=e.target.querySelector("#roomName").value,a=e.target.querySelector("#maxPlayers").value,s=e.target.querySelector("#minPlayers").value,r=e.target.querySelector("#time").value,i=e.target.querySelector("#treasure").value,n=e.target.querySelector("#difficulty").checked,l=e.target.querySelector("#size").value,m=document.querySelector("#_csrf").value;return t&&a&&s&&r&&i?(o.sendPost(e.target.action,{name:t,maxPlayers:a,minPlayers:s,time:r,numTreasures:i,hardOn:n,size:l,_csrf:m},document.getElementById("roomErrorText"),c),!1):(document.getElementById("roomErrorText").innerText="all fields required",!1)},l=e=>React.createElement("form",{id:"roomForm",onSubmit:n,name:"roomForm",action:"/makeRoom",method:"POST",className:"roomForm"},React.createElement("h2",{className:"roomFormTitle"},"create a room"),React.createElement("div",{className:"roomFormName"},React.createElement("label",{htmlFor:"name",className:"roomFormNameLabel"},"room name: "),React.createElement("input",{id:"roomName",type:"text",name:"name",placeholder:"new room",className:"roomFormNameInput"})),React.createElement("div",{className:"roomFormMax"},React.createElement("label",{htmlFor:"maxPlayers",className:"roomFormMaxLabel"},"max players: "),React.createElement("input",{id:"maxPlayers",type:"number",min:"1",name:"maxPlayers",placeholder:"10",className:"roomFormMaxInput"})),React.createElement("div",{className:"roomFormMin"},React.createElement("label",{htmlFor:"minPlayers",className:"roomFormMinLabel"},"min players to start: "),React.createElement("input",{id:"minPlayers",type:"number",min:"1",name:"minPlayers",placeholder:"2",className:"roomFormMinInput"})),React.createElement("div",{className:"roomFormTime"},React.createElement("label",{htmlFor:"time",className:"roomFormTimeLabel"},"time(min): "),React.createElement("input",{id:"time",type:"number",min:"1",name:"time",placeholder:"4",className:"roomFormTimeInput"})),React.createElement("div",{className:"roomFormTreasure"},React.createElement("label",{htmlFor:"treasure",className:"roomFormTreasureLabel"},"amount of treasure: "),React.createElement("input",{id:"treasure",type:"number",min:"1",name:"treasure",placeholder:"10",className:"roomFormTreasureInput"})),React.createElement("div",{className:"roomFormSize"},React.createElement("label",{htmlFor:"size",className:"roomFormSizeLabel"},"map size: "),React.createElement("select",{id:"size",name:"treasure",className:"roomFormSizeInput",defaultValue:"medium"},React.createElement("option",{value:"small"},"small"),React.createElement("option",{value:"medium"},"medium"),React.createElement("option",{value:"large"},"large"),React.createElement("option",{value:"huge"},"huge"))),React.createElement("div",{className:"roomFormHard"},React.createElement("label",{htmlFor:"difficulty",className:"roomFormHardLabel"},"hard mode on: "),React.createElement("input",{id:"difficulty",type:"checkbox",name:"difficulty",className:"roomFormHardInput"})),React.createElement("input",{className:"roomFormSubmit",type:"submit",value:"create room"}),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("p",{id:"roomErrorText"})),m=e=>{if(0===Object.keys(e.rooms).length||0===Object.values(e.rooms).filter((e=>!e.ended)).length)return React.createElement("div",{className:"roomListContainer"},React.createElement("button",{id:"refreshRooms",className:"refreshRoomsButton",type:"button",onClick:c},"refresh rooms"),React.createElement("h3",{className:"emptyRoomList"}," no rooms yet"));const t=Object.values(e.rooms).map((e=>{if(!e.ended)return React.createElement("tr",{key:e._id,className:"room"},React.createElement("td",{className:"roomName"},e.name),React.createElement("td",{className:"roomMax"},e.maxPlayers),React.createElement("td",{className:"roomMin"},e.minPlayers),React.createElement("td",{className:"roomTime"},e.time+":00"),React.createElement("td",{className:"roomTreasures"},e.numTreasures),React.createElement("td",{className:"roomSize"},e.size),React.createElement("td",{className:"roomDifficulty"},e.hard?"yes":"no"),React.createElement("td",{className:"roomPlayers"},e.currentPlayers),React.createElement("td",null,React.createElement("button",{id:"joinRoom",className:"joinRoomButton",type:"button",onClick:()=>d(e._id,e.hard,e.size,e.worldDims)},"join")))}));return React.createElement("div",{className:"roomListContainer"},React.createElement("button",{id:"refreshRooms",className:"refreshRoomsButton",type:"button",onClick:c},"refresh rooms"),React.createElement("table",{className:"roomList"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("th",null,"name"),React.createElement("th",null,"max players"),React.createElement("th",null,"min players to start"),React.createElement("th",null,"time"),React.createElement("th",null,"amount of treasure"),React.createElement("th",null,"map size"),React.createElement("th",null,"hard mode on"),React.createElement("th",null,"players in the room"),React.createElement("th",null)),t)))},d=async(e,t,a,o)=>{const r=await fetch("/getRooms"),i=await r.json();if(!i.roomObject[e].ended&&i.roomObject[e].currentPlayers<i.roomObject[e].maxPlayers&&!i.roomObject[e].ended){document.getElementById("gameSetup").classList.add("hidden"),document.getElementById("roomList").classList.add("hidden");const r=await fetch("/getAccount"),i=await r.json();s.t(e,t,a,o,i.account.equippedSkin,i.account.username)}else c()},c=async()=>{const e=await fetch("/getRooms"),t=await e.json();ReactDOM.render(React.createElement(m,{rooms:t.roomObject}),document.getElementById("roomList"))};window.onload=async()=>{const e=await fetch("/getToken"),t=await e.json();ReactDOM.render(React.createElement(l,{csrf:t.csrfToken}),document.getElementById("gameSetup")),ReactDOM.render(React.createElement(m,{rooms:{}}),document.getElementById("roomList")),c(),document.querySelector("#leaveRoomButton").addEventListener("click",c),r.renderNavbar(),i.renderAd()}}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(977),a(762)})();